<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <title>Konami Code</title>
      <script src="js/jquery-3.6.0.min.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  </head>
  <style>
    .text2, .text3{
      display: none;
    }
    img {
        height: 250px;
        display: none;
        margin: auto;
    }

  </style>
  <body>
    <div class="container m-auto">
      <div class="card bg-warning">
        <div class="card-body d-flex justify-content-center align-items-center bg-white">
          <p class="text1">Welcome to the Secret Society. Please enter your passcode.</p>
          <p class="text2 ">"You have failed and will self-destruct in <span id="timer">15</span> seconds!"</p>
          <p class="text3">Congradulations, you will not be self destructing.</p>
        </div>
      </div>
    </div>
    <img src="img/devil_s_face_by_cryptoworks_d865x4j-fullview.png" id="img" class="">
<script>
  let counter = 15;
  let stopit;

  function updateTimer() {
    if (counter === 0) {
      alert('EXTERMINATE!');
      document.body.innerHTML = '';
    } else if (counter > 0) {
      document.getElementById('timer').innerHTML = counter;
    }
    counter--;
  }
// Message delivery
  const code = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65, 13];
  let userCode = [];

  let stringComp = function () {
    if (JSON.stringify(code) === JSON.stringify(userCode)) {
      return true;
    } else {
      return false;
    }
  };

    $(document).keyup(function(event) {
      userCode.push(event.keyCode);
      if (event.keyCode === 13) {
        stopit = setInterval(updateTimer, 1000);
        if (stringComp() !== true) {
          userCode = [];
          $('body').css('background-color', 'red');
          $('.text2').css('display', 'block');
          $('.text1').css('display', 'none');
          $('img').css('display', 'block')
        } else {
          $('.text1').css('display', 'none');
          $('.text2').css('display', 'none');
          $('.text3').css('display', 'block');
          $('body').css('background-color', "green");
          $('img').css('display', 'none');
          console.log(stopit);
          clear();
        }
      }
    });
    function clear(){
        clearInterval(stopit);
    }
</script>
  </body>
</html>
